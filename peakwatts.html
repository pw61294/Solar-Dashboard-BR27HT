<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Top 10 Peak Wattage Days</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #232832;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 180px;
      height: 100%;
      background: #16181d;
      padding: 20px 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
    }

    .sidebar a {
      color: white;
      text-decoration: none;
      font-size: 1em;
      padding: 8px 12px;
      border-radius: 5px;
      transition: background 0.3s;
    }

    .sidebar a:hover {
      background: #2e3440;
    }

    header {
      margin-left: 180px;
      background: #16181d;
      padding: 20px;
      text-align: center;
      border-bottom: 2px solid #2e3440;
    }

    .header-title h2 {
      margin: 0;
      font-size: 1.8em;
      color: #ffffff;
    }

    main {
      margin-left: 180px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .content-wrapper {
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
    }

    .chart-container {
      width: 100%;
      height: 500px;
      margin-bottom: 30px;
    }

    canvas {
      background: #16181d;
      border-radius: 10px;
      padding: 15px;
      width: 100%;
      height: 100%;
    }

    table {
      background: #16181d;
      border-radius: 10px;
      width: 100%;
      margin-top: 20px;
    }

    th, td {
      padding: 10px;
      text-align: left;
    }

    th {
      background-color: #2e3440;
    }

    tr:hover {
      background-color: #2a2f3a;
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <a href="index.html">üè† Dashboard</a>
    <a href="top10.html" class="active">üèÜ Top 10</a>
    <a href="monthly.html">üìÖ Monthly</a>
    <a href="peakwatts.html">‚ö° Peak Watts</a>
  </div>

  <header>
    <div class="header-title">
      <h2>‚ö° Top 10 Peak Wattage Days</h2>
    </div>
  </header>

  <main>
    <div class="content-wrapper">
      <div class="chart-container">
        <canvas id="peakChart"></canvas>
      </div>

      <table id="peakTable" class="display stripe hover">
        <thead>
          <tr>
            <th>Date</th>
            <th>Peak Watts</th>
            <th>Time</th>
            <th>Generated (kWh)</th>
            <th>Weather</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <script>
    const rawData = `
20250702,291,0,577,18:37,Cloudy
20250703,33626,15500,4853,13:29,Partly Cloudy
20250704,35737,14900,5415,13:32,Partly Cloudy
20250705,18870,8100,4463,13:38,Rainy
20250706,20006,4200,5044,12:31,Partly Cloudy
20250707,25658,7400,5989,14:02,Partly Cloudy
20250708,37780,17800,5372,11:11,Sunny
20250709,34654,13200,5962,13:30,Partly Cloudy
20250710,36394,16200,4359,12:26,Partly Cloudy
20250711,36446,14400,4244,11:34,Partly Cloudy
20250712,36147,12800,4300,11:30,Partly Cloudy
20250713,28394,3300,4901,14:12,Partly Cloudy
20250714,33121,11000,5641,12:41,Partly Cloudy
20250715,31809,9900,5453,12:13,Partly Cloudy
20250716,35773,8100,5685,12:28,Partly Cloudy
20250717,17364,6700,4615,10:49,Rainy
20250718,32937,10800,5583,11:20,Partly Cloudy
20250719,11048,1800,4861,14:52,Cloudy
20250720,20234,13200,5314,14:50,Partly Cloudy
20250721,27296,12500,5681,11:18,Partly Cloudy
20250722,21117,6400,6101,11:27,Cloudy
20250723,16972,6900,3755,09:59,Rainy
20250724,12494,3900,3593,11:25,Cloudy
20250725,30961,19600,4888,12:26,Partly Cloudy
20250726,20433,8300,4595,15:31,Partly Cloudy
20250727,18261,13400,5018,13:52,Cloudy
20250728,33654,14800,5881,14:07,Partly Cloudy
20250729,15511,200,4001,12:44,Rainy
20250730,19034,7700,5185,11:11,Cloudy
20250731,13691,100,5251,13:13,Cloudy
20250801,20828,5600,5534,12:02,Cloudy
20250802,21967,7400,4393,10:34,Cloudy
20250803,23685,5700,4973,10:53,Cloudy
20250804,15341,100,2885,12:10,Cloudy
20250805,30710,12800,5197,13:30,Partly Cloudy
20250806,37308,26100,4761,13:27,Partly Cloudy
20250807,23584,9400,5443,12:26,Partly Cloudy
20250808,33645,22500,5241,14:17,Partly Cloudy
20250809,42103,14200,8600,13:09,Sunny
20250810,54640,30800,7734,13:04,Sunny
20250811,53647,31200,6829,11:52,Sunny
20250812,52670,29600,6749,12:25,Sunny
20250813,22965,200,5985,14:44,Cloudy
20250814,35556,17900,8080,13:35,Partly Cloudy
20250815,50293,20900,6776,12:12,Sunny
20250816,10421,2000,1867,13:52,Cloudy
20250817,52312,21700,6934,12:01,Sunny
20250818,16978,5200,5236,11:06,Cloudy
20250819,33255,8500,6981,11:19,Partly Cloudy
20250820,24105,9100,7561,14:00,Cloudy
20250821,19737,1900,4294,14:28,Cloudy
20250822,39243,6300,7823,11:15,Partly Cloudy
20250823,28462,7400,8155,13:11,Partly Cloudy
20250824,44424,14400,7928,13:15,Sunny
20250825,51219,15900,6685,12:05,Sunny
20250826,31960,7300,7602,13:50,Partly Cloudy
20250827,31190,15400,8274,12:01,Partly Cloudy
20250828,37594,10300,8779,11:40,Partly Cloudy
20250829,23434,9800,8431,14:13,Partly Cloudy
20250830,32720,9700,8664,13:51,Partly Cloudy
20250831,39794,18600,8793,11:51,Partly Cloudy
20250901,37828,7100,7897,11:49,Partly Cloudy
20250902,26021,8000,9948,13:02,Partly Cloudy
20250903,19196,3400,7622,11:11,Cloudy
20250904,30399,4200,8263,12:25,Partly Cloudy
20250905,38156,3600,7647,12:31,Partly Cloudy
20250906,39170,5900,8542,12:34,Partly Cloudy
20250907,38121,10300,7493,12:15,Partly Cloudy
20250908,42680,7100,7594,11:31,Partly Cloudy
20250909,41082,6900,7760,12:01,Partly Cloudy
20250910,21978,7900,8907,13:15,Cloudy
20250911,30443,2500,7311,13:16,Partly Cloudy
20250912,35188,3700,8084,13:02,Partly Cloudy
20250913,31342,6300,8660,12:39,Partly Cloudy
20250914,15416,1300,3591,11:16,Rainy
20250915,34870,6300,8254,11:45,Partly Cloudy
20250916,34566,4700,8269,11:56,Partly Cloudy
20250917,8607,1000,5663,12:43,Cloudy
20250918,17912,8500,7702,14:05,Cloudy
20250919,41673,27200,6249,11:42,Partly Cloudy
20250920,15151,5800,6916,12:16,Cloudy
20250921,28457,14000,8280,11:44,Cloudy
20250922,38539,21200,7320,12:17,Partly Cloudy
20250923,23098,6300,8482,11:53,Cloudy
20250924,28577,16900,7773,11:34,Cloudy
20250925,39389,20300,7319,11:35,Partly Cloudy
20250926,8124,2000,2533,13:25,Cloudy
20250927,23002,5200,6837,13:21,Partly Cloudy
20250928,8080,700,2365,08:48,Cloudy
20250929,30965,17100,6295,12:35,Partly Cloudy
20250930,36734,16700,5903,11:54,Sunny
20251001,11792,4100,2574,13:48,Cloudy
20251002,15896,1600,3655,11:02,Cloudy
20251003,4681,100,1190,12:19,Rainy
20251004,29872,10900,7377,11:53,Partly Cloudy
20251005,27956,12700,7268,11:11,Partly Cloudy
20251006,32928,15700,5670,11:56,Sunny
20251007,13357,3900,4106,12:54,Cloudy
20251008,9230,2100,4324,14:55,Cloudy
20251009,30865,17800,5977,13:22,Sunny
20251010,4928,100,1061,12:29,Rainy
20251011,14816,200,3927,12:03,Cloudy
20251012,13486,7700,3707,12:03,Cloudy
20251013,5253,1500,3398,11:49,Cloudy
20251014,3438,600,752,10:34,Cloudy
20251015,4757,900,1190,15:02,Cloudy
20251016,7048,900,1807,12:49,Cloudy
20251017,9299,600,2136,10:47,Cloudy
20251018,8203,1500,2557,12:35,Cloudy
20251019,4965,600,2215,08:56,Cloudy
20251020,7418,3100,4582,10:01,Cloudy
20251021,15701,6900,5468,11:20,Partly Cloudy
20251022,20827,7200,5871,10:55,Partly Cloudy
20251023,3851,100,1154,15:47,Cloudy
20251024,26942,9000,4829,13:19,Sunny
20251025,12967,2900,4734,10:24,Partly Cloudy
20251026,16458,3600,5590,10:12,Partly Cloudy
20251027,16100,6200,4763,09:26,Partly Cloudy
20251028,23302,12400,5343,12:44,Sunny
20251029,1993,200,395,10:55,Sunny
20251030,13669,5400,4508,09:52,Partly Cloudy
20251031,3921,100,1906,12:50,Cloudy
20251101,18199,6400,4489,11:30,Partly Cloudy
20251102,16130,9100,4963,12:04,Partly Cloudy
20251103,6807,1600,2807,11:16,Cloudy
20251104,7244,3800,2360,09:19,Cloudy
20251105,8857,3100,4380,11:44,Cloudy
20251106,6833,2700,3894,11:50,Cloudy
20251107,3898,600,2123,13:15,Cloudy
20251108,14011,5100,4520,09:31,Sunny
20251109,17198,6100,3581,09:31,Sunny
20251110,2043,300,1579,11:36,Cloudy
20251111,5283,800,3035,13:29,Cloudy
20251112,14545,11600,4273,11:27,Partly Cloudy
20251113,13191,10000,3886,12:15,Sunny
20251114,1611,100,679,14:03,Cloudy
20251115,5399,1600,3923,09:14,Cloudy
20251116,2817,100,939,11:33,Rainy
20251117,12313,1100,3455,12:32,Sunny
20251118,5464,300,2796,13:25,Partly Cloudy
20251119,3216,800,2737,12:48,Rainy
20251120,10691,2800,3388,09:25,Sunny
20251121,14394,1300,3141,09:30,Sunny
20251122,2259,100,794,11:52,Rainy
20251123,11492,1500,3090,12:32,Sunny
20251124,3611,100,2902,08:58,Cloudy
20251125,9019,100,3589,09:25,Partly Cloudy
20251126,13744,4000,3052,12:35,Sunny
20251127,2896,100,1107,10:06,Cloudy
20251128,7582,3600,2839,12:36,Partly Cloudy
20251129,2590,100,1486,10:17,Cloudy
20251130,13146,3600,2857,09:23,Sunny
20251201,1505,100,623,11:40,Cloudy
20251202,9427,1000,3230,11:25,Partly Cloudy
20251203,12012,3400,2886,09:23,Sunny
20251204,1943,100,785,10:01,Cloudy
20251205,8895,3200,3927,12:04,Partly Cloudy
20251206,6264,1100,2986,11:28,Partly Cloudy
20251207,1795,100,544,12:05,Cloudy
20251208,4809,1300,1751,11:44,Partly Cloudy
20251209,4128,300,1560,11:49,Partly Cloudy
20251210,6159,2100,2249,13:12,Partly Cloudy
20251211,9900,3700,3082,12:45,Partly Cloudy
20251212,2044,0,976,13:07,Cloudy
20251213,10961,4100,2485,12:00,Sunny
20251214,9774,1700,3223,12:37,Partly Cloudy
20251215,2598,300,1351,10:29,Cloudy
20251216,3761,100,1623,10:28,Cloudy
20251217,3819,600,1939,09:08,Cloudy
20251218,1087,100,605,11:10,Cloudy
20251219,9780,3500,2268,12:04,Partly Cloudy
20251220,10558,1400,2316,11:56,Sunny
20251221,1315,0,484,13:38,Cloudy
20251222,3617,700,1240,12:12,Partly Cloudy
20251223,524,0,220,13:11,Cloudy
20251224,6898,1100,3176,12:18,Partly Cloudy
20251225,11684,1900,2385,12:02,Sunny
20251226,2070,100,757,11:59,Cloudy
20251227,4468,600,2081,09:03,Partly Cloudy
20251228,1602,100,437,12:10,Cloudy
20251229,1867,0,483,12:11,Cloudy
20251230,9851,500,2364,12:06,Sunny
20251231,10383,2400,2416,09:20,Sunny
20260101,6902,900,2213,11:44,Partly Cloudy
20260102,9194,1900,2554,11:57,Sunny
20260103,12068,2900,2633,09:12,Sunny
20260104,11662,2200,2561,09:07,Sunny
20260105,11690,2800,2694,09:22,Sunny
20260106,7110,1800,3143,10:50,Partly Cloudy
20260107,9435,2400,3273,12:37,Sunny
20260108,1699,0,573,11:37,Cloudy
20260109,974,0,497,12:00,Cloudy
20260110,3291,300,1445,13:18,Cloudy
20260111,3380,400,974,13:15,Cloudy
20260112,2524,100,1112,13:25,Cloudy
20260113,1254,100,644,10:01,Cloudy
20260114,12629,2800,2812,09:07,Sunny
20260115,1762,100,790,11:16,Cloudy
20260116,9115,1300,2975,09:18,Sunny
20260117,5749,100,2251,13:19,Partly Cloudy
20260118,9644,2800,3667,11:15,Sunny
20260119,7885,1300,3386,11:37,Sunny
20260120,5468,1400,2623,09:20,Partly Cloudy
20260121,1822,100,1025,11:40,Rainy
20260122,1884,0,1829,10:50,Rainy
20260123,2084,0,1784,12:44,Rainy
20260124,11313,2900,3066,09:24,Sunny
20260125,3528,400,3062,12:14,Partly Cloudy
20260126,2604,700,984,12:54,Rainy
20260127,521,0,653,14:19,Rainy
20260128,12217,7700,3288,12:24,Sunny
20260129,7872,3600,3623,09:44,Partly Cloudy
20260130,7631,3800,3159,12:14,Partly Cloudy
20260131,9260,7100,4255,12:59,Partly Cloudy
20260201,3427,600,2086,12:04,Partly Cloudy
20260202,2184,700,1294,11:34,Rainy
20260203,706,700,646,12:04,Rainy
20260204,17763,10900,4045,09:24,Sunny
20260205,1931,700,1083,12:29,Rainy
20260206,6403,4100,3734,11:39,Partly Cloudy
20260207,3178,600,2197,13:04,Rainy
20260208,7516,4500,3210,10:49,Partly Cloudy
20260209,4122,800,1928,10:44,Rainy
20260210,8492,6600,4836,11:14,Partly Cloudy
20260211,5126,2600,3836,12:19,Partly Cloudy
20260212,3017,1400,2348,12:29,Rainy
20260213,3193,700,2514,12:29,Rainy
20260214,24199,15700,4920,12:09,Sunny
20260215,1865,700,1653,14:29,Rainy
20260216,13753,8800,5377,10:14,Partly Cloudy
20260217,22180,14000,4935,09:49,Sunny
20260218,6254,4500,1579,10:09,Partly Cloudy
20260219,515,515,637,13:20,Rainy
20260220,8913,4900,3001,08:50,Partly Cloudy
20260221,8553,5100,3681,13:14,Partly Cloudy
20260222,7540,4600,3103,11:09,Partly Cloudy
20260223,8613,5400,3555,12:09,Partly Cloudy
20260224,13558,9100,6438,11:29,Partly Cloudy
20260225,28036,22600,5023,10:09,Sunny
`;

    const weatherEmoji = {
      "Sunny": "‚òÄÔ∏è Sunny",
      "Cloudy": "‚òÅÔ∏è Cloudy",
      "Partly Cloudy": "‚õÖ Partly Cloudy",
      "Rainy": "üåßÔ∏è Rainy"
    };

    $(document).ready(function(){
      const dataRows = rawData.trim().split("\n").map(r => r.split(",")).map(r => ({
        date: `${r[0].slice(0,4)}-${r[0].slice(4,6)}-${r[0].slice(6,8)}`,
        generated: Number(r[1])/1000,
        peak: Number(r[3]),
        time: r[4],
        weather: r[5]
      }));

      const topPeak = dataRows.sort((a,b)=>b.peak-a.peak).slice(0,10);

      topPeak.forEach(r => {
        $('#peakTable tbody').append(`
          <tr>
            <td>${r.date}</td>
            <td>${r.peak.toLocaleString()}</td>
            <td>${r.time}</td>
            <td>${r.generated.toFixed(2)}</td>
            <td>${weatherEmoji[r.weather] || r.weather}</td>
          </tr>
        `);
      });

      $('#peakTable').DataTable({ order: [[1,'desc']], stripeClasses:['odd','even'] });

      const ctx = document.getElementById("peakChart").getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: topPeak.map(r => r.date),
          datasets: [{
            label: 'Peak Watts',
            data: topPeak.map(r => r.peak),
            backgroundColor: '#232832',
            borderRadius: 8,
            hoverBackgroundColor: '#2e3440'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              labels: {
                color: '#eee',
                font: { size: 16 }
              }
            },
            title: {
              display: true,
              text: 'Top 10 Peak Wattage Days',
              color: '#eee',
              font: { size: 20 }
            },
            datalabels: {
              anchor: 'center',
              align: 'center',
              color: '#fff',
              font: {
                size: 14,
                weight: 'bold'
              },
              formatter: function(value, context) {
                const peakTime = topPeak[context.dataIndex].time;
                return [`${value.toLocaleString()} W`, `${peakTime}`];
              },
              textAlign: 'center',
              display: true
            }
          },
          scales: {
            x: {
              ticks: {
                color: '#eee',
                font: { size: 14 }
              }
            },
            y: {
              ticks: {
                color: '#eee',
                font: { size: 14 }
              }
            }
          }
        },
        plugins: [ChartDataLabels]
      });
    });
  </script>
</body>
</html>
